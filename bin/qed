#!/bin/bash

# Check all the arguments specified in the 'arguments' file. Well, actually,
# check only the lines in that file that begin with '+'. That way you can put
# arguments in there that you're not ready to check.

function echo_color() {
    echo -ne "\033[01;$1m$2\033[00m"
}

cat demonstrations | while read arg; do
    first_letter=${arg:0:1}
    if [[ $first_letter = "+" ]]; then
        demonstrate ${arg:1} \
        && ( echo_color 42 " works " && echo -n "   " ) \
        || ( echo_color 45 " fails " && echo -n "   " )
        echo -n `echo ${arg:1} | sed "s/from/<-/"`
        echo
    fi

    if [[ $first_letter = "-" ]]; then
        demonstrate ${arg:1} \
        && ( echo_color 41 " works " && echo -n "   " ) \
        || ( echo_color 46 " fails " && echo -n "   " )
        echo -n `echo ${arg:1} | sed "s/from/<-/"`
        echo
    fi
done
